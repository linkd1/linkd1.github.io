<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>XML to HTML Transformation</title>
  <script>
    function getUrlParameter(name) {
      name = name.replace(/[\[\]]/g, "\\$&");
      var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
          results = regex.exec(window.location.href);
      if (!results) return null;
      if (!results[2]) return '';
      return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    function transformXml() {
      // Get the XML file URL from the URL parameter
      var xmlUrl = getUrlParameter('url');
      if (!xmlUrl) {
        console.error('XML file URL not provided.');
        return;
      }

      // Load the XML document
      var xml = new XMLHttpRequest();
      xml.open("GET", xmlUrl, false);
      xml.send();

      // Get the HTML content from the XML document
      var xmlDoc = xml.responseXML;
      var htmlContent = xmlDoc.getElementsByTagName('Content')[0].textContent;

      // Inject HTML content into the body of the HTML document
      document.body.innerHTML = htmlContent;

      // Dynamically load linked resources (e.g., scripts, stylesheets)
      var links = document.querySelectorAll('head link[href], body script[src]');
      for (var i = 0; i < links.length; i++) {
        var link = links[i];
        var clone = document.createElement(link.tagName);
        for (var j = 0; j < link.attributes.length; j++) {
          clone.setAttribute(link.attributes[j].name, link.attributes[j].value);
        }
        if (link.tagName === 'SCRIPT') {
          clone.onload = clone.onerror = function() {
            console.log('Script loaded:', this.src);
          };
        }
        document.head.appendChild(clone);
      }
    }
  </script>
</head>
<body onload="transformXml()">
</body>
</html>
